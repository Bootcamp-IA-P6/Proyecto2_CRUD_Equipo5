<!-- templates/renting/home.html -->
{% extends 'renting/base.html' %}
{% load static %}

{% block content %}
<!-- Search & Filter Section -->
<section class="mb-5 p-4 bg-white rounded shadow-sm">
    <div class="row g-3 align-items-end">
        <div class="col-md-4">
            <label class="form-label fw-bold">Find a vehicle</label>
            <input type="text" id="search-input" class="form-control" placeholder="Search by model or brand...">
        </div>
        <div class="col-md-3">
            <label class="form-label fw-bold">Vehicle Type</label>
            <select class="form-select" id="filter-type">
                <option value="">All Types</option>
                <option value="SUV">SUV</option>
                <option value="Sedan">Sedan</option>
            </select>
        </div>
        <div class="col-md-2">
            <button class="btn btn-primary w-100" onclick="loadVehicles(true)">Search</button>
        </div>
    </div>
</section>

<!-- Vehicle List Area -->
<div class="vehicle-grid" id="vehicle-list"></div>

<!-- ⚠️ 하이브리드 컨트롤 영역 -->
<div id="pagination-controls" class="text-center mt-5 mb-5">
    <!-- 로딩 스피너 (데이터 로딩 중일 때만 표시) -->
    <div id="loading-spinner" class="spinner-border text-primary d-none" role="status"></div>
    
    <!-- 더보기 버튼 (무한 스크롤이 실패하거나 명시적으로 누르고 싶을 때) -->
    <button id="load-more-btn" class="btn btn-outline-dark px-5 py-2 d-none" onclick="loadVehicles()">
        Load More Vehicles
    </button>
    
    <!-- 마지막 메시지 -->
    <p id="no-more-msg" class="text-muted d-none">No more vehicles to display.</p>
</div>

<!-- 바닥 감지용 센서 (Observer가 관찰할 타겟) -->
<div id="scroll-sentinel" style="height: 10px;"></div>

<script src="{% static 'renting/js/home.js' %}"></script>
{% endblock %}